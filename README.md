
# 🚗 差速小车控制系统（基于 STM32F103 + FreeRTOS）

本项目是一个基于 **STM32F103C8T6** 和 **FreeRTOS** 实时操作系统的差速驱动小车控制平台，采用 **TB6612 电机驱动模块** 控制两路直流减速电机，实现前进、转向、停止等基本功能。系统架构清晰，支持串口通信控制，适合嵌入式开发学习、机器人控制原型开发等用途。

---

## 🧱 硬件组成

| 组件              | 描述                                  |
|-------------------|---------------------------------------|
| 控制核心          | STM32F103C8T6                         |
| 电机驱动模块      | TB6612双路直流电机驱动            |
| 电机              | 12V 直流减速电机（编码器可选）         |
| 电源              | 2S/3S 锂电池或 12V 电源模块             |
| 通信接口          | USART（串口通信，用于上位机或无线）     |
| 其他扩展（可选）  | 超声波模块、IMU、编码器、蓝牙模块等     |

---

## ⚙️ 软件特性

- ✅ 基于 FreeRTOS 实现多任务调度，分离通信与控制逻辑
- ✅ 串口协议解析任务，支持上位机发送控制指令
- ✅ 差速驱动控制逻辑，支持直线、原地转向等模式
- ✅ 驱动采用 TB6612，占空比和方向信号独立控制
- ✅ 支持软启动、PWM 占空比限幅等功能（可选）

---

## 📡 控制协议说明

通过串口发送 8 位控制字节：

```
格式: AADDBBEE

AA: 左轮方向（00=停止，01=正转，02=反转）
DD: 左轮速度（00=停止，01=中速，02=快速）

BB: 右轮方向
EE: 右轮速度

示例:
  01100110 = 左轮正转速度为10，右轮正转速度为10
  00000000 → 停止
  01100100 → 左轮反转中速，右轮停止
```


## 🚀 快速上手

### 1. 硬件连接

- **TB6612 驱动接线**
- **电机与电源接好，确保供电充足（建议加稳压与保护）**

### 2. 软件配置

- 使用 STM32CubeMX 生成工程
- 使用 Keil5编译

### 3. 编译与下载

- 使用 STM32CubeIDE 或 Keil 打开工程
- 编译无误后下载至 STM32F103C8T6
- 上电运行，串口发送命令测试小车运动

---

## 🛠️ 开发环境

- MCU: STM32F103C8T6
- IDE: STM32CubeIDE / Keil uVision5
- RTOS: FreeRTOS 
- 驱动: TB6612
- 串口助手: SSCOM / Python 串口工具等

---

## 📌 TODO（可扩展功能）

- [ ] 编码器反馈 + PID 速度控制
- [ ] 超声波避障任务
- [ ] 蓝牙 / ESP8266 无线控制接口
- [ ] ROS/STM32 接口适配  验证接入nav2导航
- [ ] 路径点导航与原地旋转优化

---


## 📄 License

本项目采用 MIT 开源协议，欢迎学习和改进。  
如用于商业用途，请注明来源或联系作者。

---

欢迎 Star ⭐、Fork 🍴、交流 🤝！